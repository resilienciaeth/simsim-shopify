{{ 'custom-carousel.css' | asset_url | stylesheet_tag }}

<div class="custom-carousel-wrapper page-width-none section custom-carousel-section">
  <div class="custom-carousel" id="carousel-{{ section.id }}">
    <!-- Slide 1: Two columns -->
    <div class="carousel-slide active" data-slide="1">
      <div class="slide-content two-columns">
        <div class="column">
          {%- if section.settings.slide1_image1 != blank -%}
            <img
              src="{{ section.settings.slide1_image1 | image_url: width: 800 }}"
              alt="{{ section.settings.slide1_image1.alt | escape }}"
              loading="lazy"
              width="{{ section.settings.slide1_image1.width }}"
              height="{{ section.settings.slide1_image1.height }}"
            >
          {%- else -%}
            <div class="placeholder-image">
              <span>Image 1</span>
            </div>
          {%- endif -%}
        </div>
        <div class="column">
          {%- if section.settings.slide1_image2 != blank -%}
            <img
              src="{{ section.settings.slide1_image2 | image_url: width: 800 }}"
              alt="{{ section.settings.slide1_image2.alt | escape }}"
              loading="lazy"
              width="{{ section.settings.slide1_image2.width }}"
              height="{{ section.settings.slide1_image2.height }}"
            >
          {%- else -%}
            <div class="placeholder-image">
              <span>Image 2</span>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>

    <!-- Slide 2: Two columns -->
    <div class="carousel-slide" data-slide="2">
      <div class="slide-content two-columns">
        <div class="column">
          {%- if section.settings.slide2_image1 != blank -%}
            <img
              src="{{ section.settings.slide2_image1 | image_url: width: 800 }}"
              alt="{{ section.settings.slide2_image1.alt | escape }}"
              loading="lazy"
              width="{{ section.settings.slide2_image1.width }}"
              height="{{ section.settings.slide2_image1.height }}"
            >
          {%- else -%}
            <div class="placeholder-image">
              <span>Image 3</span>
            </div>
          {%- endif -%}
        </div>
        <div class="column">
          {%- if section.settings.slide2_image2 != blank -%}
            <img
              src="{{ section.settings.slide2_image2 | image_url: width: 800 }}"
              alt="{{ section.settings.slide2_image2.alt | escape }}"
              loading="lazy"
              width="{{ section.settings.slide2_image2.width }}"
              height="{{ section.settings.slide2_image2.height }}"
            >
          {%- else -%}
            <div class="placeholder-image">
              <span>Image 4</span>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>

    <!-- Slide 3: One column -->
    <div class="carousel-slide" data-slide="3">
      <div class="slide-content one-column">
        <div class="column">
          {%- if section.settings.slide3_image != blank -%}
            <img
              src="{{ section.settings.slide3_image | image_url: width: 1600 }}"
              alt="{{ section.settings.slide3_image.alt | escape }}"
              loading="lazy"
              width="{{ section.settings.slide3_image.width }}"
              height="{{ section.settings.slide3_image.height }}"
            >
          {%- else -%}
            <div class="placeholder-image">
              <span>Full Width Image</span>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const carousel = document.getElementById('carousel-{{ section.id }}');
    const slides = carousel.querySelectorAll('.carousel-slide');
    // Removed indicators and navigation buttons
    let currentSlide = 1;
    let autoSlideInterval;

    function showSlide(slideNumber) {
      // Remove active class from all slides
      slides.forEach((slide) => slide.classList.remove('active'));

      // Add active class to current slide
      const targetSlide = carousel.querySelector(`[data-slide="${slideNumber}"]`);

      if (targetSlide) {
        targetSlide.classList.add('active');
      }

      currentSlide = slideNumber;
    }

    function nextSlide() {
      const next = currentSlide >= 3 ? 1 : currentSlide + 1;
      showSlide(next);
    }

    function prevSlide() {
      const prev = currentSlide <= 1 ? 3 : currentSlide - 1;
      showSlide(prev);
    }

    function startAutoSlide() {
      autoSlideInterval = setInterval(nextSlide, 5000); // 5 seconds
    }

    function stopAutoSlide() {
      clearInterval(autoSlideInterval);
    }

    // Pause on hover (optional - can be removed if you want continuous auto-slide)
    carousel.addEventListener('mouseenter', stopAutoSlide);
    carousel.addEventListener('mouseleave', startAutoSlide);

    // Start the carousel
    startAutoSlide();
  });
</script>

{% schema %}
{
  "name": "Custom Carousel",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Slide 1 Settings"
    },
    {
      "type": "image_picker",
      "id": "slide1_image1",
      "label": "Slide 1 - Left Image"
    },
    {
      "type": "image_picker",
      "id": "slide1_image2",
      "label": "Slide 1 - Right Image"
    },
    {
      "type": "header",
      "content": "Slide 2 Settings"
    },
    {
      "type": "image_picker",
      "id": "slide2_image1",
      "label": "Slide 2 - Left Image"
    },
    {
      "type": "image_picker",
      "id": "slide2_image2",
      "label": "Slide 2 - Right Image"
    },
    {
      "type": "header",
      "content": "Slide 3 Settings"
    },
    {
      "type": "image_picker",
      "id": "slide3_image",
      "label": "Slide 3 - Full Width Image"
    }
  ],
  "presets": [
    {
      "name": "Custom Carousel"
    }
  ]
}
{% endschema %}
